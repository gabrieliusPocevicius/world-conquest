/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.1
*/
zingchart.setModule("wordcloud"),ZC.ADO=function(){var t=function(){this.AEQ=9,this.AEP=99,this.AEN=2,this.EE=100,this.AEI=15,this.AEG=5,this.ZE=!1,this.EQ="word",this.AC9=[],this.AR="",this.aWords=[],this.oWordsMap=null,this.CW="spiral",this.AEW="palette",this.C1="#000",this.bNormalize=!1,this.AGH=function(){for(var t=(16777215*Math.random()+1<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},this.KE=function(){var t,e,a={};if(""!==this.AR){if("word"===this.EQ)t=this.AR.replace(/[\:\;\,\.\{\}\[\]\(\)\?\!\/\=\+\-]/g," ").split(" ");else if("character"===this.EQ)for(this.AEN=0,t=[],e=0;e<this.AR.length;e++)" "!==this.AR[e]&&t.push(this.AR[e]);for(e=0;e<t.length;e++){var l=this.bNormalize?t[e].toLowerCase():t[e];if(t[e].length>=this.AEN&&-1===ZC.AV(this.AC9,t[e]))if(this.bNormalize){var o=!1;for(var r in a)r.toLowerCase()===l&&(o=!0,a[r]++);o||(a[t[e]]=1)}else null===ZC._n_(a[t[e]])&&(a[t[e]]=0),a[t[e]]++}}if(this.aWords.length>0)for(this.oWordsMap={},e=0;e<this.aWords.length;e++){var i=this.aWords[e];null!==ZC._n_(i.text)&&(this.oWordsMap[i.text]=i,a[i.text]=i.count||0)}return a},this.intersectRect=function(t,e){return!(e.iX>t.iX+t.I||e.iX+e.I<t.iX||e.iY>t.iY+t.F||e.iY+e.F<t.iY)}};return t.getDefaults=function(e){var a={};return ZC._cp_(t.B7,a),t.NU[e]&&ZC._cp_(t.NU[e],a),a},t.B7={palette:["#6a921f","#007fa3","#a62b02","#b79007","#563d02","#0b32a0"]},t.NU={light:{palette:["#7CA82B","#29A2CC","#D31E1E","#EF8535","#A14BC9","#A05F18","#265E96","#6B7075"]},dark:{palette:["#7CA82B","#29A2CC","#D31E1E","#EF8535","#A14BC9","#A05F18","#265E96","#6B7075"]}},t}(),zingchart.bind(null,"dataparse",function(t,e){for(var a,l,o,r,i,n=zingchart.getLoader(t.id),s=0,h=e.graphset.length;s<h;s++)if(e.graphset[s].type&&"wordcloud"===e.graphset[s].type){var p=e.graphset[s].type,C=e.graphset[s],_=ZC.ADO.getDefaults(t.theme),E={};for(C.options&&(E=C.options[p]||C.options),ZC._todash_(E,!0,["words"]),C.labels=C.labels||[],r=C.labels.length-1;r>=0;r--)(C.labels[r]["data-word-cloud"]||C.labels[r].dataWordCloud)&&C.labels.splice(r,1);C.plotarea=C.plotarea||{},null===ZC._n_(C.plotarea.margin)&&(C.plotarea.margin=5);var A=new ZC.ADO;null!==ZC._n_(a=E.text)&&(A.AR=a),null!==ZC._n_(a=E.words)&&(A.aWords=a),null!==ZC._n_(a=E.aspect)&&(A.CW=a),null!==ZC._n_(a=E.ignore)&&(A.AC9=a),null!==ZC._n_(a=E.token)&&(A.EQ=a),null!==ZC._n_(a=E["min-length"])&&(A.AEN=ZC._i_(a)),null!==ZC._n_(a=E["min-font-size"])&&(A.AEQ=ZC._i_(a)),null!==ZC._n_(a=E["max-font-size"])&&(A.AEP=ZC._i_(a)),null!==ZC._n_(a=E["max-items"])&&(A.EE=ZC._i_(a)),null!==ZC._n_(a=E["color-type"])&&(A.AEW=a),null!==ZC._n_(a=E.color)&&(A.C1=ZC.AP.G5(a)),null!==ZC._n_(a=E.palette)?A.BP=a:A.BP=_.palette,null!==ZC._n_(a=E["step-angle"])&&(A.AEI=ZC._i_(a)),null!==ZC._n_(a=E["step-radius"])&&(A.AEG=ZC._i_(a)),null!==ZC._n_(a=E.rotate)&&(A.ZE=ZC._b_(a)),null!==ZC._n_(a=E.normalize)&&(A.bNormalize=ZC._b_(a));var u={};null!==ZC._n_(a=E.style)&&ZC._cp_(a,u);var f=zingchart.getInstance(n,"textbox");f.append(u),f.parse(),A.AEQ=ZC.BQ(4,A.AEQ),A.AEP=ZC.BQ(4,A.AEP),A.AEQ>=A.AEP&&(A.AEP=A.AEQ+2);var Z=zingchart.getGraphInfo(n,e,s),c=[],d=Z.plotarea.x+Z.plotarea.width/2,g=Z.plotarea.y+Z.plotarea.height/2,W=1;"spiral"===A.CW?W=A.ZE?.65:.55:"flow-top"!==A.CW&&"flow-center"!==A.CW||(A.ZE=!1,W=.75);var w=Z.plotarea.width*Z.plotarea.height*W,v=A.KE(),b=[],x=-Number.MAX_VALUE,Q=Number.MAX_VALUE;for(var P in v)b.push({text:P,count:v[P],hits:v[P]});for(b.sort(function(t,e){return t.count<e.count?1:t.count>e.count?-1:0}),-1!==A.EE&&b.splice(A.EE,b.length-A.EE),l=0;l<b.length;l++)x=ZC.BQ(b[l].count,x),Q=ZC.CY(b[l].count,Q);for(l=0;l<b.length;l++)b[l].count=x===Q?50:10+90*(b[l].count-Q)/(x-Q);var m=function(t){for(l=0;l<b.length;l++)b[l].fontSize=Math.max(A.AEQ,ZC._i_(A.AEQ+b[l].count/100*(A.AEP-A.AEQ))-t),b[l].width=ZC.Q.A3Y(n.K,b[l].text,f.GD,b[l].fontSize,f.sFontWeight,f.FF)+f.EP+f.FK,b[l].height=1.1*b[l].fontSize+f.FJ+f.FR};m(0);for(var y=!1;!y;){y=!0;var z=0;for(l=0;l<b.length;l++)z+=b[l].width*b[l].height;z>w&&(y=!1,A.AEP--,A.AEP<=A.AEQ+4&&A.AEQ--,m(0),(A.AEQ<5||A.AEP<5)&&(y=!0))}null===ZC._n_(E["step-radius"])&&(A.AEG=(A.AEP-A.AEQ+.25*A.AEQ*A.AEN+1)/10);for(var B=!0,F=-1;B&&F<A.AEP-A.AEQ;){c=[],C.labels=[],m(F+=1),B=!1;var M,N=0,G=0,D=A.AEP/2,R=A.AEP/2,I=[];for(l=0,o=b.length;l<o;l++){var X=!0,Y=d,k=g,S=A.C1;switch(A.AEW){case"random":S=A.AGH();break;case"palette":S=A.BP[l%A.BP.length]}var K=A.ZE?l%4==0||l%4==3?0:90:0,L=!1,U=b[l].text,O={padding:0,dataWordCloud:!0};ZC._cp_(u,O),ZC._cp_({angle:K,"font-size":Math.max(A.AEQ,b[l].fontSize-F),text:U,color:S},O),null!==ZC._n_(E.style)&&null!==ZC._n_(a=E.style["hover-state"])&&(O["hover-state"]={},ZC._cp_(a,O["hover-state"]));var V=U;O.tooltip={visible:!1,"background-color":"#fff",color:"#333","border-width":1,"border-color":"#999",padding:10,text:V},null!==ZC._n_(E.style)&&null!==ZC._n_(a=E.style.tooltip)&&ZC._cp_(a,O.tooltip),O.tooltip.text=O.tooltip.text.replace("%text",U).replace("%hits",b[l].hits),A.oWordsMap&&null!==ZC._n_(A.oWordsMap[U])&&(ZC._cp_(A.oWordsMap[U],O),ZC._cp_(A.oWordsMap[U].style,O));var H=0,J=0,j=0,q=A.AEQ/2;for("flow-top"===A.CW?j=1:"flow-center"===A.CW&&(j=l%2==0?1:-1),I[l]=0;X&&!B;){var T=b[l].width,$=b[l].height;if("spiral"===A.CW?(Y=d+(0===l?0:D)*ZC.EF(N)-T/2,k=g+(0===l?0:R)*ZC.EO(N)-$/2):"flow-center"===A.CW?(Y=0===l?d-T/2:Z.plotarea.x+H,k=g-$/2+J):"flow-top"===A.CW&&(Y=0===l?d-T/2:Z.plotarea.x+H,k=Z.plotarea.y+J),90===K&&"flow-top"===A.CW&&(k=ZC.BQ(k,Z.plotarea.y+$)),O.x=ZC._i_(Y),O.y=ZC._i_(k),X=!1,90===K){var tt=T;Y=ZC._i_(Y+T/2-$/2),k=ZC._i_(k+$/2-T/2),T=$,$=tt}if(Y<Z.plotarea.x||Y+T>Z.plotarea.x+Z.plotarea.width||k<Z.plotarea.y||k+$>Z.plotarea.y+Z.plotarea.height)if("spiral"===A.CW){if(!(I[l]<200)){L=!0,B=!0;break}I[l]++,X=!0}else if("flow-top"===A.CW||"flow-center"===A.CW){if(Y+T>Z.plotarea.x+Z.plotarea.width&&(X=!0,H=-q,J+=j*q),k+$>Z.plotarea.y+Z.plotarea.height){L=!0;break}if(k<Z.plotarea.y){L=!0;break}}if(M={iX:Y,iY:k,I:T,F:$,DK:Math.max(b[l].fontSize-F,A.AEQ),AR:b[l].text,GD:f.GD},!X)for(r=0,i=c.length;r<i;r++)if(A.intersectRect(c[r],M)){H+=c[r].I,X=!0;break}"spiral"===A.CW?X?(N+=A.AEI)>G+360&&(D+=A.AEG,R+=A.AEG*(Z.plotarea.height/Z.plotarea.width),N=G=5*l%360):(D=R=A.AEP/2,N=G=5*l%360):"flow-top"!==A.CW&&"flow-center"!==A.CW||X&&(H+=q)}L||M.iX<Z.plotarea.x||M.iX+M.I>Z.plotarea.x+Z.plotarea.width||M.iY<Z.plotarea.y||M.iY+M.F>Z.plotarea.y+Z.plotarea.height||(c.push(M),C.labels.push(O))}"flow-top"!==A.CW&&"flow-center"!==A.CW||b.length>c.length&&(B=!0)}}return e});
/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.1
*/
zingchart.setModule("tree"),function(){if(!ZC.ZCVector){ZC.ZCVector=function(e,i){this.fMagnitude=e,this.fDirection=i,this.fMagnitude<0&&(this.fMagnitude=-this.fMagnitude,this.fDirection=(180+this.fDirection)%360),this.fDirection<0&&(this.fDirection=360+this.fDirection)},ZC.ZCVector.add=function(e,i){var t=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),r=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection);t+=i.fMagnitude*Math.cos(Math.PI/180*i.fDirection),r+=i.fMagnitude*Math.sin(Math.PI/180*i.fDirection);var n,a=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));return n=0===a?0:180/Math.PI*Math.atan2(r,t),new ZC.ZCVector(a,n)},ZC.ZCVector.sub=function(e,i){var t=e.fMagnitude*Math.cos(Math.PI/180*e.fDirection),r=e.fMagnitude*Math.sin(Math.PI/180*e.fDirection);t-=i.fMagnitude*Math.cos(Math.PI/180*i.fDirection),r-=i.fMagnitude*Math.sin(Math.PI/180*i.fDirection);var n,a=Math.sqrt(Math.pow(t,2)+Math.pow(r,2));return n=0===a?0:180/Math.PI*Math.atan2(r,t),new ZC.ZCVector(a,n)},ZC.ZCVector.multiply=function(e,i){return new ZC.ZCVector(e.fMagnitude*i,e.fDirection)},ZC.ZCVector.prototype.toXY=function(){return[this.fMagnitude*Math.cos(Math.PI/180*this.fDirection),this.fMagnitude*Math.sin(Math.PI/180*this.fDirection)]};var e=function(e,i){var t=e.x-i.x,r=e.y-i.y;return Math.sqrt(Math.pow(t,2)+Math.pow(r,2))},i=function(e,i){var t=e.x+(i.x-e.x)/2,r=e.y+(i.y-e.y)/2,n=t-e.x,a=r-e.y;if(0===n&&0===a)return 0;return 0===n?a>=0?90:270:0===a?n>=0?0:180:Math.atan2(a,n)*(180/Math.PI)},t=function(t,r,n,a,l){var c=Math.max(e(r,n),1),s=Math.min(.99,t*(l||1))*(c-a);s=Math.max(s,-a),s=Math.min(s,a);var d=i(r,n);return new ZC.ZCVector(s,d)},r=function(t,r,n,a,l,c,s,d){var o=Math.max(e(r,n),1),h=r.size||1,g=n.size||1;if(s||(h=g=1),d&&(c=1),o>c*a)return new ZC.ZCVector(0,0);var p=-t*h*g/(o*o*l);p=Math.max(p,-a),p=Math.min(p,a);var u=i(r,n);return new ZC.ZCVector(p,u)},n=function(e){for(var i=zingchart.plugins.tree[e].data,t=Number.MAX_VALUE,r=-Number.MAX_VALUE,n=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=0;l<i.length;l++)"link"===i[l].type?(n=Math.min(n,i[l].value),a=Math.max(a,i[l].value)):(t=Math.min(t,i[l].value),r=Math.max(r,i[l].value));zingchart.plugins.tree[e].minValue=t,zingchart.plugins.tree[e].maxValue=r,zingchart.plugins.tree[e].minLinkValue=n,zingchart.plugins.tree[e].maxLinkValue=a};zingchart.plugins.tree=zingchart.plugins.tree||{},zingchart.plugins.tree.graph_defaults={plotarea:{margin:5},container:{padding:5},node:{type:"circle","border-width":1,"border-color":"#fff",tooltip:{text:"%text"},label:{"font-size":10,padding:1,color:"#000",text:"%text"}},link:{flat:!0,"line-color":"#999",alpha:.5,type:"line"}},zingchart.plugins.tree.orgchart_defaults={plotarea:{margin:10},container:{"tree-right":{padding:"20 60 20 60"},"tree-left":{padding:"20 60 20 60"},"tree-down":{padding:"20 60 20 60"},"tree-up":{padding:"20 60 20 60"}},node:{type:"rectangle",width:80,height:30,"border-width":1,"border-color":"#333","background-color":"#fff",label:{color:"#000",width:80,"font-size":10,align:"center",anchor:"c",text:"%text"}},link:{aspect:"split","line-color":"#999","line-width":1}},zingchart.plugins.tree.tree_defaults={plotarea:{margin:10},container:{"tree-radial":{padding:"120 120 120 120"},"tree-right":{padding:"20 120 20 40"},"tree-left":{padding:"20 40 20 120"},"tree-down":{padding:"40 20 120 20"},"tree-up":{padding:"120 20 40 20"}},link:{aspect:"arc","line-color":"#999","line-width":1},"node[collapsed]":{"border-width":1,"border-color":"#666"},node:{type:"circle",tooltip:{text:"%text:%value"},label:{"font-size":10,padding:1,width:100,color:"#000","clip-text":!0,text:"%text"},label_jsRule:function(e,i,t){var r={},n=ZC._i_(i.label.width)/2,a=null!==ZC._n_(i.width)?ZC._i_(i.width)/2:i.size,l=null!==ZC._n_(i.height)?ZC._i_(i.height)/2:i.size,c=Math.max(a,l);switch(t){case"tree-right":0===e.level?r["offset-y"]=-i.size-l:(r.anchor=e.children&&e.children.length?"r":"l",r["offset-x"]=e.children&&e.children.length?-5-a:5+a,r.align=e.children&&e.children.length?"right":"left");break;case"tree-left":0===e.level?r["offset-y"]=-i.size-l:(r.anchor=e.children&&e.children.length?"l":"r",r["offset-x"]=e.children&&e.children.length?5+a:-5-a,r.align=e.children&&e.children.length?"left":"right");break;case"tree-down":r.anchor="c",0===e.level?r["offset-y"]=-i.size-l:(r["offset-y"]=e.children&&e.children.length?-5-n-l:5+n+l,r.angle=91,r.align=e.children&&e.children.length?"right":"left",r["offset-x"]=e.children&&e.children.length?1:0);break;case"tree-up":r.anchor="c",0===e.level?r["offset-y"]=i.size+l:(r["offset-y"]=e.children&&e.children.length?5+n+l:-5-n-l,r.angle=271,r.align=e.children&&e.children.length?"right":"left",r["offset-x"]=e.children&&e.children.length?-1:0);break;case"tree-radial":var s,d;0===e.level?r["offset-y"]=-i.size-l:(e.children&&e.children.length?(e.angle>90&&e.angle<270?(r.angle=e.angle+180,r.align="left"):(r.angle=e.angle,r.align="right"),s=ZC.AO.BK(e.cx,e.cy,e.radius,e.angle),d=ZC.AO.BK(e.cx,e.cy,e.radius-(5+n+c),e.angle)):(e.angle>90&&e.angle<270?(r.angle=e.angle+180,r.align="right"):(r.angle=e.angle,r.align="left"),s=ZC.AO.BK(e.cx,e.cy,e.radius,e.angle),d=ZC.AO.BK(e.cx,e.cy,e.radius+(5+n+c),e.angle)),r["offset-x"]=d[0]-s[0],r["offset-y"]=d[1]-s[1])}for(var o in r)null!==ZC._n_(i.label[o])&&delete r[o];return r}}},zingchart.bind(null,"dataparse",function(e,i){for(var t,r,n,a,l=0,c=i.graphset.length;l<c;l++)if(i.graphset[l].type&&"tree"===i.graphset[l].type){var s=i.graphset[l].type;i.graphset[l]["plugin-type"]=s;var d=i.graphset[l];zingchart.normalize(d),d.type="null";var o={};d.options&&(o=d.options[s]||d.options),ZC._todash_(o),d.series=d.series||[];var h=o["text-attr"]||"text",g=o["value-attr"]||"value",p=o["source-attr"]||"source",u=o["target-attr"]||"target",_=o.aspect||"tree-right",f=ZC._b_(ZC._c_(o["org-chart"],0));if(d.plotarea=d.plotarea||{},f?ZC._inj_(d.plotarea,zingchart.plugins.tree.orgchart_defaults.plotarea||{}):"graph"===_?ZC._inj_(d.plotarea,zingchart.plugins.tree.graph_defaults.plotarea||{}):ZC._inj_(d.plotarea,zingchart.plugins.tree.tree_defaults.plotarea||{}),!(d.series instanceof Array)){var v=[],x={},C=function(e,i){var t=(e.text||e.name||e[h]).toLowerCase().replace(/[^a-z0-9_]+/gi,"");x[t]?t+=x[t]++:x[t]=1;var r={id:t,text:e.text||e.name||e[h]||t,value:e.value||e.size||e[g],parent:i||""};if(v.push(r),e.children)for(var n=0;n<e.children.length;n++)C(e.children[n],t)};C(d.series),d.series=v}for(t=0;t<d.series.length;t++)d.series[t].text=d.series[t].text||d.series[t].name||d.series[t][h]||"Node "+t,d.series[t].value=d.series[t].value||d.series[t].size||d.series[t][g],d.series[t]["node-value"]=d.series[t].value,d.series[t].id||(d.series[t].text?d.series[t].id=d.series[t].text.toLowerCase().replace(/[^a-z0-9_]+/gi,""):d.series[t].id="node"+t),d.series[t].group=d.series[t].group||-1,"graph"!==_?(d.series[t].collapsed=!1,d.series[t].visible=!0):(d.series[t].text=d.series[t].text||d.series[t].name||d.series[t][h]||"Node "+t,(d.series[t].source||d.series[t].from||d.series[t][p])&&(d.series[t].target||d.series[t].to||d.series[t][u])?(d.series[t].source=d.series[t].source||d.series[t].from||d.series[t][p],d.series[t].target=d.series[t].target||d.series[t].to||d.series[t][u],d.series[t].type="link"):d.series[t].type="node"),"graph"===_&&d.series[t].parent&&""!==d.series[t].parent&&d.series.push({type:"link",source:d.series[t].id,target:d.series[t].parent,value:1});for(zingchart.plugins.tree[e.id]=zingchart.plugins.tree[e.id]||{},zingchart.plugins.tree[e.id].size=d.series.length,t=0;t<d.series.length;t++)if(d.series[t].idx=t,null!==ZC._n_(d.series[t].parent))for(r=0;r<d.series.length;r++)d.series[r].id===d.series[t].parent&&(d.series[t].pidx=r,d.series[r].children=d.series[r].children||[],d.series[r].children.push(t));else d.series[t].parent="";for(var Z=!0,z=[];Z;)for(Z=!1,t=0;t<d.series.length;t++)if(null!==ZC._n_(d.series[t].parent)&&(n=d.series[t].parent,-1===ZC.AV(z,n))){var m=0,b=!0;for(a=-1,r=0;r<d.series.length;r++)d.series[r].id===n&&(a=r,d.series[t].pidx=r),null!==ZC._n_(d.series[r].parent)&&d.series[r].parent===n&&(null!==ZC._n_(d.series[r].value)?m+=ZC._f_(d.series[r].value):b=!1);if(b&&-1!==a){null!==ZC._n_(d.series[a].value)&&(d.series[a]["node-value"]=d.series[a].value),d.series[a].value=m,z.push(n),Z=!0;continue}}for(t=0;t<d.series.length;t++)d.series[t].value=d.series[t].value||1,"graph"===_&&(d.series[t].container=d.series[t].container||0);for(var M=!0,y=Number.MAX_VALUE,w=-Number.MAX_VALUE,k=0;M;)for(M=!1,t=0;t<d.series.length;t++)"graph"===_&&"node"!==d.series[t].type||(y=Math.min(y,d.series[t].value),w=Math.max(w,d.series[t].value)),null===ZC._n_(d.series[t].level)?d.series[t].sibling||null!==ZC._n_(d.series[t].parent)&&""!==d.series[t].parent?(a=d.series[t].pidx,null!==ZC._n_(a)?null===ZC._n_(d.series[a].level)?M=!0:(d.series[t].level=ZC._i_(d.series[a].level)+1,"graph"!==_&&(d.series[t].container=d.series[a].container)):d.series[t].container=d.series[t].level=0):(d.series[t].level=0,"graph"!==_&&(d.series[t].container=k),k++):(a=d.series[t].pidx,null!==ZC._n_(a)?d.series[t].container=d.series[a].container||0:d.series[t].container=0);if(zingchart.plugins.tree[e.id].minValue=y,zingchart.plugins.tree[e.id].maxValue=w,"graph"===_){var V=Number.MAX_VALUE,A=-Number.MAX_VALUE;for(t=0;t<d.series.length;t++)"link"===d.series[t].type&&(V=Math.min(V,d.series[t].value),A=Math.max(A,d.series[t].value));zingchart.plugins.tree[e.id].minLinkValue=V,zingchart.plugins.tree[e.id].maxLinkValue=A}d.plotarea=d.plotarea||{},ZC._inj_(d.plotarea,{margin:"10 10 10 10","mask-tolerance":[0,0]})}return i});var a=function(n){var a=zingchart.getLoader(n.loader.id),l=zingchart.getGraph(a,n.graphid),c=l.o;if("tree"===c["plugin-type"]){var s,d,o,h=zingchart.getGraphInfo(a,c,l.L).plotarea,g={};c.options&&(g=c.options.tree||c.options),ZC._todash_(g);var p=g.palette||["#a7da47","#00b0e1","#ef4810","#f9c332","#84680a","#4d62b1","#00BAF2","#E80C60","#E2D51A","#9B26AF","#FB301E","#00AE4D","#20398B"],u=g.aspect||"tree-right",_=ZC._b_(ZC._c_(g["org-chart"],0)),f=g.layout||"x",v=ZC._i_(ZC._c_(g.progression,"0")),x=ZC._i_(ZC._c_(g.aperture,"360")),C=ZC._i_(ZC._c_(g["ref-angle"],"0")),Z=ZC._i_(ZC._c_(g["min-size"],4)),z=ZC._i_(ZC._c_(g["max-size"],4)),m=ZC._i_(ZC._c_(g["min-link-width"],1)),b=ZC._i_(ZC._c_(g["max-link-width"],5)),M=ZC._f_(ZC._c_(g["attraction-constant"],.99)),y=ZC._i_(ZC._c_(g["repulsion-constant"],1e3)),w=ZC._i_(ZC._c_(g["repulsion-distance-factor"],20)),k=ZC._f_(ZC._c_(g["spring-length"],40)),V=ZC._i_(ZC._c_(g["max-iterations"],1e3)),A=ZC._f_(ZC._c_(g["damping-step"],.005)),L=ZC._b_(ZC._c_(g["weighted-nodes"],0)),X=ZC._b_(ZC._c_(g["weighted-links"],0)),E=Math.max(1,ZC._i_(ZC._c_(g["packing-factor"],1))),I=Math.max(.1,ZC._f_(ZC._c_(g["depth-ratio"],2))),N=ZC._b_(ZC._c_(g["weighted-links"],0));_&&(N=!0),zingchart.plugins.tree[n.id].data=[].concat(c.series||[]),zingchart.plugins.tree[n.id].attractionConstant=M,zingchart.plugins.tree[n.id].repulsionConstant=y,zingchart.plugins.tree[n.id].springLength=k;var j,P,D=function(e,i){var t=zingchart.plugins.tree[n.id].data;if(t[e].children)for(var r=0;r<t[e].children.length;r++)t[t[e].children[r]].coord+=i,D(t[e].children[r],i)},Y=function(e){var i=zingchart.plugins.tree[n.id].data,t=!1,r=-1,a=-1;if(null===ZC._n_(i[e].pidx))t=!0;else{var l=ZC.AV(i[i[e].pidx].children,e);0===l?t=!0:(t=!1,r=l-1,a=i[i[e].pidx].children[r])}return{first:t,prevSiblingIndex:r,prevIndex:a}},R=function(e,i){var t=zingchart.plugins.tree[n.id].data,r=[];if(r.push(e),t[e].children&&t[e].children.length&&(i||!t[e].collapsed))for(var a=0;a<t[e].children.length;a++)r=r.concat(R(t[e].children[a]));return r},U=function(e){for(var i=zingchart.plugins.tree[n.id].data,t=R(e,!0),r=0;r<t.length;r++)0===r?i[t[r]].collapsed=!i[t[r]].collapsed:i[t[r]].visible=!i[t[r]].visible},F=function(e,i,t){var r=zingchart.plugins.tree[n.id].data,a=[];if(i){for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[0];for(;null!==ZC._n_(r[e].pidx);)(-1===t||r[e].level<=t)&&a.push(e),e=r[e].pidx}if(a.push(e),!i)for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[0],(-1===t||r[e].level<=t)&&a.push(e);return a},O=function(e,i,t){var r=zingchart.plugins.tree[n.id].data,a=[];if(i){for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[r[e].children.length-1];for(;null!==ZC._n_(r[e].pidx);)(-1===t||r[e].level<=t)&&a.push(e),e=r[e].pidx}if(a.push(e),!i)for(;r[e].children&&r[e].children.length&&!r[e].collapsed&&!r[e].fake;)e=r[e].children[r[e].children.length-1],(-1===t||r[e].level<=t)&&a.push(e);return a},B=function(e){for(var i=zingchart.plugins.tree[n.id].data,t=Number.MAX_VALUE,r=0;r<e.length;r++)t=Math.min(t,i[e[r]].coord);return t},K=function(e){for(var i=zingchart.plugins.tree[n.id].data,t=-Number.MAX_VALUE,r=0;r<e.length;r++)t=Math.max(t,i[e[r]].coord);return t},S=null,q=function(){var e,i=zingchart.plugins.tree[n.id].data;if(!S)for(S={},e=0;e<i.length;e++)S[i[e].id]=i[e].idx;var t={};for(e=0;e<i.length;e++){if(i[e].reference){var r=i[S[i[e].reference]];t[i[e].reference]=t[i[e].reference]||1,i[e].coord=r.coord,i[e].level=r.level+t[i[e].reference],t[i[e].reference]+=1}if(i[e].sibling&&0===i[e].level){var a=i[S[i[e].sibling]];i[e].idx<a.idx?i[e].coord=a.coord-E:i[e].coord=a.coord+E}}J()},T=0,J=function(){for(var e=zingchart.plugins.tree[n.id].data,i=0;i<e.length;i++)e[i].visible&&(T=Math.max(T,c.series[i].level))},G=function(e,i){var t=zingchart.plugins.tree[n.id].data;if(t[e].visible&&(t[e].reference?t[e].coord=0:t[e].coord=i*E,t[e].children))for(var r=0;r<t[e].children.length;r++)G(t[e].children[r],r*E)},H=function(e){var i=zingchart.plugins.tree[n.id].data;if(i[e].visible&&!i[e].reference&&i[e].children&&!i[e].collapsed){var t=i[e].children.length,r=i[e].children[0],a=i[e].children[t-1],l=(i[r].coord+i[a].coord)/2,c=Y(e),s=c.first,d=c.prevSiblingIndex;if(s)i[e].coord=l;else{var o=i[i[e].pidx].children[d];i[e].coord=i[o].coord+E;var h=i[e].coord-l;0!==h&&D(e,h)}}},Q=function(e){var i=zingchart.plugins.tree[n.id].data;if(i[e].visible&&!i[e].reference){var t=Y(e),r=t.first,a=t.prevIndex;if(!r){var l=O(a,!1,-1),c=F(e,!1,-1),s=K(l),d=B(c),o=0;d<=s&&(o=s-d+E,i[e].coord+=o,D(e,o))}if(i[e].children&&i[e].children.length&&!i[e].collapsed)for(var h=0;h<i[e].children.length;h++)Q(i[e].children[h])}},W=function(e){var i=zingchart.plugins.tree[n.id].data;if(i[e].visible&&i[e].children&&!i[e].collapsed){for(var t=i[e].children.length,r=i[e].children[0],a=i[e].children[t-1],l=(i[r].coord+i[a].coord)/2,c=i[e].coord-l,s=0;s<i.length;s++)i[s].sibling===i[e].id&&(i[s].coord-=c);i[e].coord=l}},$=function(e){var i=zingchart.plugins.tree[n.id].data,t=0;if(!i[e].visible)return t;if(i[e].children&&i[e].children.length>1&&!i[e].collapsed)for(var r="r",a=1;a<i[e].children.length;a++){var l=i[i[e].children[a]],c=i[i[e].children[a-1]];c.children&&c.children.length?l.children&&l.children.length||(r="l",l.coord-c.coord>E&&(l.coord=c.coord+E,t++)):l.children&&l.children.length?(r="r",l.coord-c.coord>E&&(c.coord=l.coord-E,t++)):l.coord-c.coord>E&&("r"===r?(c.coord=l.coord-E,t++):(l.coord=c.coord+E,t++))}return t},ee=function(e){var i=zingchart.plugins.tree[n.id].data,t=Y(e),r=t.first,a=t.prevIndex;if(!r){var l=R(a),c=R(e),s=K(l),d=B(c),o=0;d>s+E&&(o=d-s-E,i[e].coord+=-o,D(e,-o))}},ie=[],te=[],re=[],ne=[],ae=[],le=[],ce={},se={},de={},oe=1,he=0,ge="",pe=[0,0],ue=!1,_e={},fe=!0,ve=!0,xe=zingchart.getInstance(l,"textbox");_?xe.append(zingchart.plugins.tree.orgchart_defaults.container[u]):"graph"===u?xe.append(zingchart.plugins.tree.graph_defaults.container):xe.append(zingchart.plugins.tree.tree_defaults.container[u]),xe.append(g.container),xe.parse();var Ce=xe.FJ,Ze=xe.FK,ze=xe.FR,me=xe.EP,be=function(e){if(ie=[],e>1){var i=-1,t=-1;if("h"===f)i=1,t=e;else if("v"===f)i=e,t=1;else if(-1!==f.indexOf("x")){var r=f.split("x");""!==r[0]&&(i=ZC._i_(r[0])),""!==r[1]&&(t=ZC._i_(r[1])),-1===i&&-1===t?i=t=Math.ceil(Math.sqrt(e)):-1===i&&-1!==t?i=Math.ceil(e/t):-1!==i&&-1===t&&(t=Math.ceil(e/i))}for(var n=h.width/t,a=h.height/i,l=0;l<i;l++)for(var c=0;c<t;c++)ie[l*t+c]={x:h.x+c*n,y:h.y+l*a,width:n,height:a}}else ie[0]={x:h.x,y:h.y,width:h.width,height:h.height}};zingchart.plugins.tree[n.id].bFirstRender=!0;var Me={},ye=function(l){if(a.SP=[],M=zingchart.plugins.tree[n.id].attractionConstant,y=zingchart.plugins.tree[n.id].repulsionConstant,k=zingchart.plugins.tree[n.id].springLength,!l||(oe=1,he=0,!ue)){ue=!0;var c,d,o=zingchart.plugins.tree[n.id].data,h=ae.length,g=le.length,p=0,u=0,_=[];""!==ge&&(o[ce[ge]].x=pe[0],o[ce[ge]].y=pe[1]);var f,v=[];for(s=0;s<h;s++)if(c=o[ae[s]],f=ie[c.container],v[c.container]||(v[c.container]={minX:Number.MAX_VALUE,minY:Number.MAX_VALUE,maxX:-Number.MAX_VALUE,maxY:-Number.MAX_VALUE}),c.id!==ge){var x,C={x:f.x+f.width/2,y:f.y+f.height/2},Z={x:f.x+f.width/2,y:f.y+f.height/2},z=k,E=1,I="";null!==ZC._n_(c.level)&&c.level>0&&z>20&&(z=Math.round(Math.max(20,z-5*c.level)));var N=new ZC.ZCVector(e(C,c),i(C,c)),j=new ZC.ZCVector(0,0),P=new ZC.ZCVector(0,0);for(d=0;d<h;d++)if(s!==d&&c.container===o[ae[d]].container){E=1,x=z,I=c.id+"-"+o[ae[d]].id,we[I]&&(x=we[I]),X&&o[de[I]]&&zingchart.plugins.tree[n.id].maxLinkValue!==zingchart.plugins.tree[n.id].minLinkValue&&(E+=Math.round((b-m)*(o[de[I]].value-zingchart.plugins.tree[n.id].minLinkValue)/(zingchart.plugins.tree[n.id].maxLinkValue-zingchart.plugins.tree[n.id].minLinkValue)));var D=r(y,c,o[ae[d]],x,E,w,L,o[de[I]]?1:0);P=ZC.ZCVector.add(P,D)}if(c.level){var Y=r(y,c,Z,z,E,10*w,L,0);P=ZC.ZCVector.add(P,Y)}j=ZC.ZCVector.add(j,P);var R=!1,U=new ZC.ZCVector(0,0);if(se[c.id])for(d=0;d<se[c.id].length;d++){E=1,x=z,I=c.id+"-"+o[ce[se[c.id][d]]].id,we[I]&&(x=we[I]),X&&(E=m,zingchart.plugins.tree[n.id].maxLinkValue!==zingchart.plugins.tree[n.id].minLinkValue&&(E+=Math.round((b-m)*(o[de[I]].value-zingchart.plugins.tree[n.id].minLinkValue)/(zingchart.plugins.tree[n.id].maxLinkValue-zingchart.plugins.tree[n.id].minLinkValue))));var F=t(M,c,o[ce[se[c.id][d]]],x,E);F.fMagnitude/=2,U=ZC.ZCVector.add(U,F),o[ce[se[c.id][d]]].id===ge&&(R=!0)}else{var O=t(M,c,Z,z,1);U=ZC.ZCVector.add(U,O)}if(se[c.id]?(U.fMagnitude>z/10||se[c.id].length>1)&&(U=ZC.ZCVector.multiply(U,Math.min(1,(R?2.5:1)/se[c.id].length))):U.fMagnitude=Math.min(5*(R?2.5:1),U.fMagnitude),c.cg){var B=t(999*M,c,c.cg,5,1);U=ZC.ZCVector.add(U,B)}j=ZC.ZCVector.add(j,U),j=ZC.ZCVector.multiply(j,oe);var K=(N=ZC.ZCVector.add(N,j)).toXY(),S=e(c,{x:f.x+f.width/2+K[0],y:f.y+f.height/2+K[1]});p+=S,u=Math.max(u,S),c.__x=f.x+f.width/2+K[0],c.__y=f.y+f.height/2+K[1]}for(s=0;s<h;s++)(c=o[ae[s]]).id!==ge&&(c.x=c.__x,c.y=c.__y),v[c.container].minX=Math.min(v[c.container].minX,c.x),v[c.container].maxX=Math.max(v[c.container].maxX,c.x),v[c.container].minY=Math.min(v[c.container].minY,c.y),v[c.container].maxY=Math.max(v[c.container].maxY,c.y);var q=0,T=[];for(s=0;s<v.length;s++)T[s]=1,v[s].maxX-v[s].minX>ie[s].width&&(T[s]=Math.min(T[s],ie[s].width/(v[s].maxX-v[s].minX))),v[s].maxY-v[s].minY>ie[s].height&&(T[s]=Math.min(T[s],ie[s].height/(v[s].maxY-v[s].minY))),v[s].diffX=ie[s].x+ie[s].width/2-(v[s].maxX+v[s].minX)/2,v[s].diffY=ie[s].y+ie[s].height/2-(v[s].maxY+v[s].minY)/2,q+=e({x:ie[s].x+ie[s].width/2,y:ie[s].y+ie[s].height/2},{x:(v[s].maxX+v[s].minX)/2,y:(v[s].maxY+v[s].minY)/2});var J={};for(s=0;s<h;s++)(c=o[ae[s]]).cg||(""===ge?(c.x+=v[c.container].diffX/k,c.y+=v[c.container].diffY/k):o[ce[ge]].container!==c.container&&(c.x+=v[c.container].diffX/k,c.y+=v[c.container].diffY/k)),Me[c.id]&&(c.x=Me[c.id][0]||c.x,c.y=Me[c.id][1]||c.y),1!==T[c.container]?(c._x_=ie[c.container].x+ie[c.container].width/2+(c.x-ie[c.container].x-ie[c.container].width/2)*T[c.container],c._y_=ie[c.container].y+ie[c.container].height/2+(c.y-ie[c.container].y-ie[c.container].height/2)*T[c.container]):(c._x_=c.x,c._y_=c.y),_e[c.id]=[c._x_,c._y_],J={id:"node_"+c.id,x:c._x_,y:c._y_},15===he&&(J.visible=fe),_.push(J);for(s=0;s<g;s++){c=o[le[s]];var G=o[ce[c.source]],H=o[ce[c.target]];J={id:"link_"+G.id+"_"+H.id,points:[[G._x_,G._y_],[H._x_,H._y_]]},15===he&&(J.visible=ve),_.push(J)}zingchart.exec(n.id,"updateobject",{type:"shape",data:_}),++he<15||he<V&&(p>1&&u>.1||q>2)?(oe=Math.max(.001,oe-A),window.setTimeout(ye,1)):ue=!1}},we={},ke=zingchart.plugins.tree[n.id]._render_graph_=function(){zingchart.exec(n.id,"removeobject",{type:"shape",cls:"zctreeshape"}),re=[],ne=[],ae=[],le=[],ce={},se={},de={};var e,i=zingchart.plugins.tree[n.id].data,t=!1,r=[],a=0;for(s=0;s<i.length;s++)((e=i[s]).parent||e.children)&&(t=!0),"node"===e.type?(ae.push(s),ce[e.id]=s,r[e.container]||(r[e.container]=[],a++),r[e.container].push(s)):(le.push(s),se[e.source]=se[e.source]||[],se[e.source].push(e.target),se[e.target]=se[e.target]||[],se[e.target].push(e.source),de[e.source+"-"+e.target]=s,de[e.target+"-"+e.source]=s);be(a);for(var l={},c=0;c<ie.length;c++){var d=ie[c];if(r[c]=r[c]||[],r[c].length){var o=[d.x+d.width/2,d.y+d.height/2];if(t)for(var h={},u=0;u<r[c].length;u++)if((e=i[r[c][u]]).parent){var _=i[ce[e.parent]];if(_){var f=l[_.id],v=ZC.AO.BK(f[0],f[1],Math.max(25,60-5*_.level),h[e.parent]);l[e.id]=[v[0],v[1]];var x=15;e.level<=1&&(x=360/Math.max(1,(_.children||[]).length)),h[e.id]||(h[e.id]=h[_.id],e.children&&_.children.length>1&&(h[e.id]-=15*(e.children.length-1)/2)),h[_.id]+=x}}else l[e.id]=[o[0],o[1]],h[e.id]=1;else for(var C=Math.ceil(Math.sqrt(r[c].length)),M=Math.min(10,Math.round(d.width/C)),y=M*C,w=Math.min(10,Math.round(d.height/C)),k=w*C,V=0;V<C;V++)for(var A=0;A<C;A++){var L=V*C+A;L<r[c].length&&(l[i[r[c][L]].id]=[o[0]-y/2+A*M,o[1]-k/2+V*w])}}}for(s=0;s<ae.length;s++){e=i[ae[s]],_e[e.id]?(e.x=_e[e.id][0],e.y=_e[e.id][1]):(e.x=l[e.id][0],e.y=l[e.id][1]);var X=Z;zingchart.plugins.tree[n.id].maxValue!==zingchart.plugins.tree[n.id].minValue&&(X+=Math.round((z-Z)*(e.value-zingchart.plugins.tree[n.id].minValue)/(zingchart.plugins.tree[n.id].maxValue-zingchart.plugins.tree[n.id].minValue))),e.size=1+.5*X/z;var E=ZC._i_(-1!==e.group?e.group:e.level||"0"),I={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.node,I),ZC._cp_({id:"node_"+e.id,cls:"zctreeshape","background-color":p[E%p.length],size:X},I),ZC._cp_(g.node||{},I),ZC._cp_(g["node[group-"+e.group+"]"],I),ZC._cp_(g["node[container-"+e.container+"]"],I),e.cls)for(var N=e.cls.split(/\s/),j=0;j<N.length;j++)ZC._cp_(g["node[cls-"+N[j]+"]"],I);if(g.nodes&&g.nodes[e.id]&&ZC._cp_(g.nodes[e.id],I),I["js-rule"])try{var P=ZC.execFn(I["js-rule"].replace("javascript:","").replace("()",""),window,n.id,e,I);P&&ZC._cp_(P,I)}catch(K){}e.style&&ZC._cp_(e.style,I);var D,Y={decimals:null,"short":!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(I,Y),I.label&&I.label.text){I.label.text=I.label.text.replace(/%text/gi,e.text).replace(/%node-value/gi,zingchart.formatNumber(e["node-value"],Y)).replace(/%value/gi,zingchart.formatNumber(e.value,Y));for(D in e)"data-"===D.substring(0,5)&&(I.label.text=I.label.text.replace(new RegExp("%"+D,"g"),e[D]));I.label.text=I.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(I.tooltip&&I.tooltip.text){ZC._cp_(I.tooltip,Y),I.tooltip.text=I.tooltip.text.replace(/%text/gi,e.text).replace(/%node-value/gi,zingchart.formatNumber(e["node-value"],Y)).replace(/%value/gi,zingchart.formatNumber(e.value,Y));for(D in e)"data-"===D.substring(0,5)&&(I.tooltip.text=I.tooltip.text.replace(new RegExp("%"+D,"g"),e[D]));I.tooltip.text=I.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}zingchart.plugins.tree[n.id].bFirstRender&&(null===ZC._n_(I.visible)||I.visible||(fe=!1),I.visible=!1),null!==ZC._n_(I.x)||null!==ZC._n_(I.y)?(Me[e.id]=[0,0],null!==ZC._n_(I.x)?(I.x=ZC._i_(I.x),Me[e.id][0]=I.x):I.x=e.x,null!==ZC._n_(I.y)?(I.y=ZC._i_(I.y),Me[e.id][1]=I.y):I.y=e.y):(I.x=e.x,I.y=e.y),re.push(I)}for(s=0;s<le.length;s++){e=i[le[s]];var R=i[ce[e.source]],U=i[ce[e.target]],F=m;zingchart.plugins.tree[n.id].maxLinkValue!==zingchart.plugins.tree[n.id].minLinkValue&&(F+=Math.round((b-m)*(e.value-zingchart.plugins.tree[n.id].minLinkValue)/(zingchart.plugins.tree[n.id].maxLinkValue-zingchart.plugins.tree[n.id].minLinkValue)));var O={};if(ZC._cp_(zingchart.plugins.tree.graph_defaults.link,O),ZC._cp_({id:"link_"+R.id+"_"+U.id,cls:"zctreeshape","fast-vector-path":!0,"line-width":F,points:[[R.x,R.y],[U.x,U.y]]},O),ZC._cp_(g.link||{},O),ZC._cp_(g["link[group-"+R.group+"]"],O),ZC._cp_(g["link[container-"+R.container+"]"],O),ZC._cp_(g["link[source-"+R.id+"]"],O),ZC._cp_(g["link[target-"+U.id+"]"],O),e.cls&&ZC._cp_(g["link[cls-"+e.cls+"]"],O),O["js-rule"])try{var B=ZC.execFn(O["js-rule"].replace("javascript:","").replace("()",""),window,n.id,e,R,U,O);B&&ZC._cp_(B,O)}catch(K){}g.links&&g.links[R.id+"-"+U.id]&&ZC._cp_(g.links[R.id+"_"+U.id],O),zingchart.plugins.tree[n.id].bFirstRender&&(null===ZC._n_(O.visible)||O.visible||(ve=!1),O.visible=!1),O.length&&(we[R.id+"-"+U.id]=we[U.id+"-"+R.id]=O.length),ne.push(O)}zingchart.exec(n.id,"addobject",{type:"shape",data:ne.concat(re)}),zingchart.plugins.tree[n.id].bFirstRender=!1,window.setTimeout(function(){ye(!0)},1)},Ve=function(){a.SP=[],ie=[],te=[],re=[],ne=[];var e=zingchart.plugins.tree[n.id].data,i=[],t=[];for(s=0;s<e.length;s++)0!==e[s].level||e[s].sibling||(i.push(e[s]),t.push(s));J();var r={};for(s=0;s<e.length;s++)r[e[s].container+"-"+e[s].level]=r[e[s].container+"-"+e[s].level]||[],r[e[s].container+"-"+e[s].level].push(e[s].idx);be(i.length);for(var l,c=0;c<ie.length;c++)if(i[c]){for(s=0;s<t.length;s++)s===c&&G(t[s],s);for(q(),d=T;d>=0;d--)if(r[c+"-"+d])for(s=0;s<r[c+"-"+d].length;s++)H(r[c+"-"+d][s]);for(q(),s=0;s<t.length;s++)Q(t[s]);for(q(),d=T-1;d>=0;d--)if(r[c+"-"+d])for(s=0;s<r[c+"-"+d].length;s++)W(r[c+"-"+d][s]);for(q(),d=T-1;d>=0;d--)if(r[c+"-"+d])for(var h=1,f=0;h>0&&f<128;){for(h=0,s=0;s<r[c+"-"+d].length;s++)h+=$(r[c+"-"+d][s]);f++}for(q(),s=0;s<e.length;s++)if(e[s].container===c&&e[s].children)for(o=1;o<e[s].children.length;o++)ee(e[s].children[o]);for(q(),d=T-1;d>=0;d--)if(r[c+"-"+d])for(s=0;s<r[c+"-"+d].length;s++)W(r[c+"-"+d][s]);q();var m=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(s=0;s<e.length;s++)e[s].container===c&&(""!==e[s].parent?e[s].visible&&e[e[s].pidx].visible&&te.push([e[s].pidx,e[s].idx]):e[s].sibling&&null===ZC._n_(e[s].pidx)&&null!==ZC._n_(S[e[s].sibling])&&te.push([S[e[s].sibling],e[s].idx]),e[s].visible&&(m=Math.min(m,e[s].coord),b=Math.max(b,e[s].coord)));m===b&&(b=m+E);var M=ie[c],y=function(e){for(var i=0,t=e;t>=0;t--)i+=Math.pow(2,t);return i};switch(u){case"tree-radial":l=Math.min(M.width-Ze-me,M.height-Ce-ze)/(2*Math.max(T,1)),0!==v&&(l=Math.pow(2,T-1)*Math.min(M.width-Ze-me,M.height-Ce-ze)/y(T-1));break;case"tree-down":case"tree-up":l=(M.height-Ce-ze)/Math.max(T,1),0!==v&&(l=Math.pow(2,T-1)*(M.height-Ce-ze)/y(T-1));break;case"tree-left":case"tree-right":l=(M.width-Ze-me)/Math.max(T,1),0!==v&&(l=Math.pow(2,T-1)*(M.width-me-Ze)/y(T-1))}var w;for(s=0;s<e.length;s++)if(e[s].visible&&e[s].container===c)switch(u){case"tree-right":if(w=(M.height-Ce-ze)/(b-m),e[s].y=M.y+Ce+(e[s].coord-m)*w,0===T&&(e[s].y+=M.height/2),e[s].x=M.x+me,0===v)e[s].x+=e[s].level*l;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].x+=l*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].x+=l*Math.pow(2,-T+d+1);break;case"tree-left":if(w=(M.height-Ce-ze)/(b-m),e[s].y=M.y+Ce+(e[s].coord-m)*w,0===T&&(e[s].y+=M.height/2),e[s].x=M.x+M.width-Ze,0===v)e[s].x-=e[s].level*l;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].x-=l*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].x-=l*Math.pow(2,-T+d+1);break;case"tree-down":if(w=(M.width-Ze-me)/(b-m),e[s].x=M.x+me+(e[s].coord-m)*w,0===T&&(e[s].x+=M.width/2),e[s].y=M.y+Ce,0===v)e[s].y+=e[s].level*l;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].y+=l*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].y+=l*Math.pow(2,-T+d+1);break;case"tree-up":if(w=(M.width-Ze-me)/(b-m),e[s].x=M.x+me+(e[s].coord-m)*w,0===T&&(e[s].x+=M.width/2),e[s].y=M.y+M.height-ze,0===v)e[s].y-=e[s].level*l;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].y-=l*Math.pow(2,-d);else if(1===v)for(d=0;d<e[s].level;d++)e[s].y-=l*Math.pow(2,-T+d+1);break;case"tree-radial":if(w=x/(b-m+1),e[s].angle=C+(e[s].coord-m)*w,e[s].radius=0,0===v)e[s].radius+=e[s].level*l;else if(-1===v)for(d=0;d<e[s].level;d++)e[s].radius+=l*Math.pow(2,-d-1);else if(1===v)for(d=0;d<e[s].level;d++)e[s].radius+=l*Math.pow(2,-T+d);e[s].cx=M.x+me+(M.width-me-Ze)/2,e[s].cy=M.y+Ce+(M.height-Ce-ze)/2,j=ZC.AO.BK(e[s].cx,e[s].cy,e[s].radius,e[s].angle),e[s].x=j[0],e[s].y=j[1]}}var k,V,A={},L=_?zingchart.plugins.tree.orgchart_defaults:zingchart.plugins.tree.tree_defaults;for(s=0;s<e.length;s++)if(e[s].visible&&!e[s].fake){k=e[s];var X=Math.round(Z+(z-Z)*(k.value-zingchart.plugins.tree[n.id].minValue)/(zingchart.plugins.tree[n.id].maxValue-zingchart.plugins.tree[n.id].minValue)),N={};if(ZC._cp_(L.node,N),ZC._cp_({id:"node_"+k.id,cls:"zctreeshape","background-color":p[k.level%p.length],"hover-state":{"background-color":ZC.AP.JH(p[k.level%p.length],20)},x:k.x,y:k.y,size:X,dataTreeIndex:k.idx},N),k.children&&k.children.length?ZC._cp_(L["node[parent]"],N):ZC._cp_(L["node[leaf]"],N),k.collapsed&&ZC._cp_(L["node[collapsed]"],N),ZC._cp_(g.node||{},N),k.children&&k.children.length?ZC._cp_(g["node[parent]"],N):ZC._cp_(g["node[leaf]"],N),k.collapsed&&ZC._cp_(g["node[collapsed]"],N),ZC._cp_(g["node[container-"+k.container+"]"],N),ZC._cp_(g["node[level-"+k.level+"]"],N),k.parent&&ZC._cp_(g["node[parent-"+e[k.pidx].id+"]"],N),k.cls)for(var D=k.cls.split(/\s/),Y=0;Y<D.length;Y++)ZC._cp_(g["node[cls-"+D[Y]+"]"],N);if(g.nodes&&g.nodes[k.id]&&ZC._cp_(g.nodes[k.id],N),N.label&&(N.label.x=k.x,N.label.y=k.y,L.node.label_jsRule&&ZC._cp_(L.node.label_jsRule(k,N,u),N.label)),N["js-rule"])try{var R=ZC.execFn(N["js-rule"].replace("javascript:","").replace("()",""),window,n.id,k,N);R&&ZC._cp_(R,N)}catch(ue){}k.style&&ZC._cp_(k.style,N);var U,F={decimals:null,"short":!1,"thousands-separator":",","decimals-separator":"."};if(ZC._cp_(N,F),N.label&&N.label.text){N.label.text=N.label.text.replace(/%text/gi,k.text).replace(/%node-value/gi,zingchart.formatNumber(k["node-value"],F)).replace(/%value/gi,zingchart.formatNumber(k.value,F));for(U in k)"data-"===U.substring(0,5)&&(N.label.text=N.label.text.replace(new RegExp("%"+U,"g"),k[U]));N.label.text=N.label.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}if(N.tooltip&&N.tooltip.text){ZC._cp_(N.tooltip,F),N.tooltip.text=N.tooltip.text.replace(/%text/gi,k.text).replace(/%node-value/gi,zingchart.formatNumber(k["node-value"],F)).replace(/%value/gi,zingchart.formatNumber(k.value,F));for(U in k)"data-"===U.substring(0,5)&&(N.tooltip.text=N.tooltip.text.replace(new RegExp("%"+U,"g"),k[U]));N.tooltip.text=N.tooltip.text.replace(new RegExp("%data-([a-zA-Z0-9]+)","g"),"")}re.push(N),A[k.id]=[],A[k.id][0]=ZC._i_(N.width||N.size||"0"),A[k.id][1]=ZC._i_(N.height||N.size2||N.size||"0"),A[k.id][2]=ZC._i_(N["offset-x"]||"0"),A[k.id][3]=ZC._i_(N["offset-y"]||"0")}for(s=0;s<te.length;s++){V=e[te[s][0]],k=e[te[s][1]];var O={};if(ZC._cp_(L.link,O),ZC._cp_({id:"link_"+k.idx+"_"+V.idx,cls:"zctreeshape",type:"line",flat:!0},O),ZC._cp_(g.link||{},O),ZC._cp_(g["link[level-"+V.level+"]"],O),ZC._cp_(g["link[container-"+V.container+"]"],O),ZC._cp_(g["link[parent-"+V.id+"]"],O),!(k.sibling&&(V=e[S[k.sibling]],O.aspect="sibling",ZC._cp_(g["link[sibling]"],O),V.fake&&k.fake||k.fake&&!k.children))){if(O["js-rule"])try{var B=ZC.execFn(O["js-rule"].replace("javascript:","").replace("()",""),window,n.id,k,V,O);B&&ZC._cp_(B,O)}catch(ue){}g.links&&g.links[V.id+"_"+k.id]&&ZC._cp_(g.links[V.id+"_"+k.id],O);var K,ae,le=[],ce=k.x,se=k.y;A[k.id]&&(ce+=A[k.id][2],se+=A[k.id][3]);var de=V.x,oe=V.y;A[V.id]&&(de+=A[V.id][2],oe+=A[V.id][3]);var he=l;switch(O.aspect){case"sibling":le=[[ce,se],[de,oe]];break;case"side-before":case"side-after":"tree-down"===u||"tree-up"===u?(_||(he=ZC._a_(oe-se)),le=[[ce,se],[de+("side-after"===O.aspect?1:-1)*A[V.id][0]/3,se],[de+("side-after"===O.aspect?1:-1)*A[V.id][0]/3,oe+("tree-down"===u?1:-1)*he/I],[de+("side-after"===O.aspect?1:-1)*A[V.id][0]/3,oe+("tree-down"===u?1:-1)*he/I],[de+("side-after"===O.aspect?1:-1)*A[V.id][0]/3,oe]]):(_||(he=ZC._a_(de-ce)),le=[[ce,se],[ce,oe+("side-after"===O.aspect?-1:1)*A[V.id][1]/3],[de+("tree-right"===u?1:-1)*he/I,oe+("side-after"===O.aspect?-1:1)*A[V.id][1]/3],[de+("tree-right"===u?1:-1)*he/I,oe+("side-after"===O.aspect?-1:1)*A[V.id][1]/3],[de,oe+("side-after"===O.aspect?-1:1)*A[V.id][1]/3]]);break;case"side-between":le=[[ce,se],[de,se],[de,oe]];break;case"arc":if(P=ZC.AO.JO(de,oe,ce,se),le.push([de,oe]),"tree-up"===u||"tree-down"===u)ae=oe-P[1],le.push([de,P[1]+ae/I,P[0],P[1]]),le.push([ce,P[1]-ae/I,ce,se]);else if("tree-left"===u||"tree-right"===u)K=de-P[0],le.push([P[0]+K/I,oe,P[0],P[1]]),le.push([P[0]-K/I,se,ce,se]);else if("tree-radial"===u&&V.level>0){var ge=ZC.AO.BK(ie[k.container].x+ie[k.container].width/2,ie[k.container].y+ie[k.container].height/2,V.radius+(k.radius-V.radius)/5,V.angle),pe=ZC.AO.BK(ie[k.container].x+ie[k.container].width/2,ie[k.container].y+ie[k.container].height/2,V.radius+4*(k.radius-V.radius)/5,k.angle);le.push([ge[0],ge[1],P[0],P[1]]),le.push([pe[0],pe[1],ce,se])}le.push([ce,se]);break;case"split":le.push([de,oe]),"tree-up"===u||"tree-down"===u?(_||(he=ZC._a_(oe-se)),le.push([de,oe+he/I*("tree-down"===u?1:-1)]),le.push([ce,oe+he/I*("tree-down"===u?1:-1)])):"tree-left"===u||"tree-right"===u?(_||(he=ZC._a_(de-ce)),le.push([de+he/I*("tree-right"===u?1:-1),oe]),le.push([de+he/I*("tree-right"===u?1:-1),se])):"tree-radial"===u&&(j=ZC.AO.BK(ie[k.container].x+ie[k.container].width/2,ie[k.container].y+ie[k.container].height/2,V.radius+(k.radius-V.radius)/2,V.angle),le.push([j[0],j[1]]),le.push([ie[k.container].x+ie[k.container].width/2,ie[k.container].y+ie[k.container].height/2,V.radius+(k.radius-V.radius)/2,V.angle,k.angle,V.angle>k.angle?1:0])),le.push([ce,se]);break;case"line":le=[[ce,se],[de,oe]]}O.points=le,ne.push(O)}}zingchart.exec(n.id,"removeobject",{type:"shape",cls:"zctreeshape"}),zingchart.exec(n.id,"addobject",{type:"shape",data:ne.concat(re)})};if("graph"===u){if(ke(),!zingchart.plugins.tree[n.id].navSetup){var Ae=function(){ge=""};zingchart.bind(n.id,"shape_mousedown",function(e){if(0===e.ev.button&&0===e.shape.id.indexOf("node_")){var i=ZC.Q.M7(e.ev),t=ZC.A4("#"+n.id+"-top").offset();pe=[i[0]-t.left,i[1]-t.top],zingchart.bind(n.id,"mouseup",Ae),ge=e.shape.id.replace("node_","")}}),zingchart.bind(n.id,"shape_mouseup",Ae),zingchart.bind(n.id,"mousemove",function(e){""!==ge?(e.ev.preventDefault(),pe=[e.x,e.y],ye(!0),(pe[0]<10||pe[0]>a.I-10||pe[1]<10||pe[1]>a.F-10)&&Ae(e)):"none"===e.target&&(l.LN(),l.A8&&l.A.A8&&l.A8.AM&&a.A8.onmouseout(e.ev))}),zingchart.bind(n.id,"beforedestroy",function(e){zingchart.plugins.tree[e.id]._render_graph_=null,zingchart.plugins.tree[e.id].navSetup=!1}),zingchart.plugins.tree[n.id].navSetup=!0}}else Ve(),N||zingchart.plugins.tree[n.id].navSetup||(zingchart.bind(n.id,"shape_click",function(e){0===e.shape.id.indexOf("node_")&&window.setTimeout(function(){U(e["data-tree-index"]),Ve()},33)}),zingchart.plugins.tree[n.id].navSetup=!0)}};zingchart.bind(null,"gcomplete",function(e){a(e)}),zingchart.extendAPI("tree.addnode",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;r.id=r.id||"N"+ZC._r_(1e4,99999),r.text=r.text||r.id,r.type="node",r.value=r.value||1,r.container=r.container||0,r.group=r.group||0,zingchart.plugins.tree[e].data.push(r),t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.removenode",function(e,i){if(zingchart.plugins.tree[e]&&i.id){var t=!0;if(null!==ZC._n_(i.update)&&(t=ZC._b_(i.update)),!i.id)return;for(var r=zingchart.plugins.tree[e].data.length-1;r>=0;r--)"node"===zingchart.plugins.tree[e].data[r].type&&zingchart.plugins.tree[e].data[r].id===i.id?zingchart.plugins.tree[e].data.splice(r,1):("link"===zingchart.plugins.tree[e].data[r].type&&zingchart.plugins.tree[e].data[r].source===i.id||zingchart.plugins.tree[e].data[r].target===i.id)&&zingchart.plugins.tree[e].data.splice(r,1);t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.getdata",function(e){return zingchart.plugins.tree[e]?zingchart.plugins.tree[e].data:null}),zingchart.extendAPI("tree.set",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;null!==ZC._n_(r["attraction-constant"])&&(zingchart.plugins.tree[e].attractionConstant=ZC._f_(r["attraction-constant"])),null!==ZC._n_(r["repulsion-constant"])&&(zingchart.plugins.tree[e].repulsionConstant=ZC._i_(r["repulsion-constant"])),null!==ZC._n_(r["spring-length"])&&(zingchart.plugins.tree[e].springLength=ZC._f_(r["spring-length"])),t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}return null}),zingchart.extendAPI("tree.addlink",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;if(!r.source||!r.target)return;for(var a=0,l=0;l<zingchart.plugins.tree[e].data.length;l++)"node"===zingchart.plugins.tree[e].data[l].type&&(zingchart.plugins.tree[e].data[l].id!==r.source&&zingchart.plugins.tree[e].data[l].id!==r.target||a++);if(2!==a)return;r.type="link",r.value=r.value||1,zingchart.plugins.tree[e].data.push(r),t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}}),zingchart.extendAPI("tree.removelink",function(e,i){if(zingchart.plugins.tree[e]&&i.data){var t=!0;null!==ZC._n_(i.update)&&(t=ZC._b_(i.update));var r=i.data;if(!r.source||!r.target)return;for(var a=zingchart.plugins.tree[e].data.length-1;a>=0;a--)(zingchart.plugins.tree[e].data[a].source===r.source&&zingchart.plugins.tree[e].data[a].target===r.target||zingchart.plugins.tree[e].data[a].source===r.target&&zingchart.plugins.tree[e].data[a].target===r.source)&&zingchart.plugins.tree[e].data.splice(a,1);t&&(n(e),zingchart.plugins.tree[e]._render_graph_())}})}}();
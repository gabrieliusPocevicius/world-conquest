/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.1
*/
zingchart.setModule("dragging"),zingchart.bind(null,"node_mouseout",function(){document.body.style.cursor="default"}),zingchart.bind(null,"node_mouseup",function(){document.body.style.cursor="default"}),zingchart.bind(null,"node_click",function(){document.body.style.cursor="default"}),zingchart.bind(null,"node_mousedown",function(e){var a=zingchart.getLoader(e.id),n=zingchart.getGraph(a,e.graphid),t=zingchart.getModules(a);if(-1!==ZC.AV(t,"dragging")){e.ev.preventDefault();var i,d=e.ev.shiftKey,l=!0,o=!1,g=0,c=0,r=0,s=0,u=0,p=e.plotindex,h=e.nodeindex,x=e.value,m=[],v=(n=zingchart.getGraph(a,e.graphid)).getData(),f={};v.options&&(f=v.options.dragging||v.options);var z=zingchart.exec(e.id,"getobjectinfo",{object:"plot",plotindex:e.plotindex});if(z.xdata.dragging){var b=0;"undefined"!=typeof f.decimals&&(b=parseInt(f.decimals,10)),"undefined"!=typeof z.xdata["dragging-decimals"]&&(b=parseInt(z.xdata["dragging-decimals"],10));var y=null;"undefined"!=typeof z.xdata["dragging-min-value"]&&(y=parseFloat(z.xdata["dragging-min-value"])),"undefined"!=typeof z.xdata["dragging-max-value"]&&(y=parseFloat(z.xdata["dragging-max-value"]));for(var _=0;_<z.scales.length;_++)-1===z.scales[_].indexOf("scale-y")&&-1===z.scales[_].indexOf("scale-v")||(i=z.scales[_]);switch(z.type){case"hbar":case"hbar3d":case"hbullet":document.body.style.cursor="ew-resize";break;case"pie":case"nestedpie":case"pie3d":case"radar":document.body.style.cursor="move";break;default:document.body.style.cursor="ns-resize"}if(-1===ZC.AV(["pie","pie3d","nestedpie"],z.type))var C=zingchart.exec(e.id,"getobjectinfo",{object:"scale",name:i});m=[].concat(zingchart.exec(e.id,"getseriesvalues",{plotindex:e.plotindex})),zingchart.SKIP.LEGEND=!0;var Z,F,k,M,V="height",A=function(){switch(z.type){case"hbar":case"hbullet":case"hbar3d":u=r,s=0,V="width";break;case"pie":case"nestedpie":case"pie3d":case"radar":u=(r+s)/2;break;default:u=s,r=0}if(Math.abs(u)>1){o=!0,zingchart.exec(e.id,"setmode",{mode:"static"});var n=zingchart.exec(e.id,"getselection");if(x=-1!==ZC.AV(["pie","pie3d","nestedpie"],z.type)?Math.max(0===b?1:1/b,parseFloat(e.value+u)):z.stacked&&"100%"===z.stackType?parseFloat((e.value+100*u/C[V]).toFixed(b)):parseFloat((e.value+(C.maxValue-C.minValue)*u/C[V]).toFixed(b)),d){for(var t=[],i=0;i<m.length;i++)null===ZC._n_(n)||null===ZC._n_(n[e.plotindex])||null!==ZC._n_(n[e.plotindex])&&-1!==ZC.AV(n[e.plotindex],i)?z.stacked&&"100%"===z.stackType?t[i]=parseFloat((m[i]+100*u/C[V]).toFixed(b)):t[i]=parseFloat((m[i]+(C.maxValue-C.minValue)*u/C[V]).toFixed(b)):t[i]=m[i],null!==ZC._n_(y)&&(t[i]=Math.max(t[i],y)),null!==ZC._n_(null)&&(t[i]=Math.min(t[i],null));zingchart.exec(e.id,"setseriesvalues",{plotindex:e.plotindex,values:t}),e["zingchart.plugins.dragging.update.type"]="plot",e["zingchart.plugins.dragging.update.values"]=t,zingchart.fireEvent("zingchart.plugins.dragging.update",a,e)}else null!==ZC._n_(y)&&(x=Math.max(x,y)),null!==ZC._n_(null)&&(x=Math.min(x,null)),zingchart.exec(e.id,"setnodevalue",{plotindex:e.plotindex,nodeindex:e.nodeindex,value:x}),e["zingchart.plugins.dragging.update.type"]="node",e["zingchart.plugins.dragging.update.value"]=x,zingchart.fireEvent("zingchart.plugins.dragging.update",a,e);zingchart.exec(e.id,"showtooltip",e)}},E=function(a){l?(c=a.pageX,g=a.pageY,l=!1):(r=a.pageX-c,s=g-a.pageY),k=a.pageX,M=a.pageY,Z=e.ev.pageX,F=e.ev.pageY,A()};ZC.A4(document.body).bind("mousemove",E),ZC.A4(document.body).bind("mouseup",function(){ZC.A4(document.body).unbind("mousemove",E),o&&(l=!0,zingchart.SKIP.LEGEND=!1,zingchart.exec(e.id,"setmode",{mode:""}),d?zingchart.exec(e.id,"update",{}):zingchart.exec(e.id,"setnodevalue",{plotindex:p,nodeindex:h,value:x}),zingchart.fireEvent("zingchart.plugins.dragging.complete",a,e),document.body.style.cursor="default"),o=!1})}}});
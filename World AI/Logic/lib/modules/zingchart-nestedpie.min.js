/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.1
*/
ZC.WA.push("nestedpie"),ZC.A6K=ZC.JS.C7({$i:function(n){this.b(n);var i=this;i.AF="nestedpie",i.AY=new ZC.A49(i)},A2A:function(){return""},MJ:function(n){switch(n){case"m":return new ZC.XO(this)}},ACI:function(){var n=this,i=n.MJ("m","scale");i.BC="scale",i.K=n.K+"-scale",n.BM.push(i),n.b()}}),ZC.A49=ZC.LF.C7({$i:function(n){this.b(n);var i=this;i.KH=[],i.P0=[]},ACQ:function(){return new ZC.TN(this)},parse:function(){var n=this;n.KH=[],n.P0=[],n.b();for(var i,C=n.A.BN("scale"),t=C.iX+C.I/2,e=1,a=0,A=n.A6.length;a<A;a++)if(n.C.E["plot"+a+".visible"]||"hide"===n.C.getToggleAction())for(var l=0,o=n.A6[a].R.length;l<o;l++)if(n.A6[a].R[l]){var s=n.A6[a].R[l];null===ZC._n_(n.P0[l])&&(n.P0[l]=n.A6[a].DG);var r=n.P0[l],B=r+360*s.AD/n.KH[l];n.P0[l]=B,s.B3=r,s.BI=B;var c=s.GU(!0);if(c&&"in"!==c.o.placement){var Z=ZC._i_((r+B)/2);i=((Z>=0&&Z<=90||Z>=270&&Z<=360?C.iX+C.I-(c.I+25):C.iX+(c.I+25))-t)/ZC.EF(Z),e=ZC.CY(e,2*i/C.I),i=C.F/2-(c.F/2+10),e=ZC.CY(e,2*i/C.F)}}e=ZC.BQ(.15,ZC.CY(.85,e)),"auto"===C.o["size-factor"]&&(C.o["size-factor"]=C.JM=e)}}),ZC.TN=ZC.IC.C7({$i:function(n){this.b(n);var i=this;i.AF="nestedpie",i.BM=["scale"],i.TV=0,i.SH=0,i.DG=0,i.C2=null,i.OZ="bg",i.aBandWidths=null},TH:function(){return new ZC.A41(this)},parse:function(){var n,i,C=this;C.BP=C.NO(),C.C1=C.BP[0],C.A0=C.BP[1],C.AE=C.BP[2],C.BV=C.BP[0],C.B9=C.BP[0],C.NM(),C.b(),C.U&&(C.C2=new ZC.D0(C),C.C.A.B7.load(C.C2.o,["graph.plot.value-box.connector",C.AF+".plot.value-box.connector"]),null!==ZC._n_(n=C.C.o.plot)&&null!==ZC._n_(n["value-box"])&&null!==ZC._n_(i=n["value-box"].connector)&&C.C2.append(i),C.C2.append(C.o["value-box"].connector)),C.assign_a([["slice-start","TV","fp"],["offset","TV","fp"],["slice","TV","fp"],["band-space","SH","fp"],["ref-angle","DG","i"],["band-widths","aBandWidths"]]),C.DG%=360;for(var t=0,e=C.R.length;t<e;t++)C.R[t]&&(C.C.E["plot"+C.L+".visible"]||"hide"===C.C.getToggleAction())&&(null===ZC._n_(C.A.KH[t])&&(C.A.KH[t]=0),C.A.KH[t]+=ZC._f_(C.R[t].AD))},paint:function(){var n=this;n.b(),n.KC=n.CO("bl",0),n.P8(!0)}}),ZC.A41=ZC.M5.C7({setup:function(){var n=this,i=n.C.BN(n.A.BT("k")[0]);n.iX=i.iX+i.I/2+i.BJ,n.iY=i.iY+i.F/2+i.BH,n.HY||(n.copy(n.A),n.o.slice=null,n.E7=n.A.E7,n.DE()&&n.parse(!1),n.HY=!0)},ADH:function(){var n=this,i=(n.B3+n.BI)/2%360,C=ZC.AO.BK(n.iX,n.iY,n.CN+n.E.bandwidth/2+n.DR,i);return[C[0],C[1]]},KE:function(n,i,C,t){var e=this,a=e.A.ML();ZC._cp_(i,a);var A=100*e.AD/e.A.A.KH[e.L],l=""+A;return null!==ZC._n_(a.decimals)&&(l=A.toFixed(ZC.BQ(0,ZC._i_(a.decimals)))),e.CV=[["%node-percent-value",l],["%npv",l]],n=e.b(n,i,C,t)},ABC:function(n){var i={},C="in";return null!==ZC._n_(n.o.placement)&&(C=n.o.placement),i.color="out"===C?this.A0:this.C1,i},ACC:function(n){var i=this,C="in";null!==ZC._n_(n.o.placement)&&(C=n.o.placement);var t,e,a,A=n.I,l=n.F,o=(i.B3+i.BI)/2%360;return"out"===C?i.L===i.A.R.length-1?(a=ZC.AO.BK(i.iX,i.iY,i.A.TV+i.A.R.length*(i.E.bandwidth+i.E.bandspace)+15+n.DR,o),t=o>=0&&o<90||o>=270&&o<360?a[0]+10+i.BJ:a[0]-A-10+i.BJ,e=a[1]-l/2+i.BH):(t=-1,e=-1):(t=(a=ZC.AO.BK(i.iX,i.iY,i.CN+i.E.bandwidth/2+n.DR,o))[0]-A/2+i.BJ,e=a[1]-l/2+i.BH),null!==ZC._n_(n.o.x)&&(t=n.iX),null!==ZC._n_(n.o.y)&&(e=n.iY),[ZC._i_(t),ZC._i_(e),o]},GU:function(n){var i=this,C=i.b(n);if(n)return C;if(C.AM&&null!==ZC._n_(C.AR)&&""!==C.AR){var t="in";if(null!==ZC._n_(C.o.placement)&&(t=C.o.placement),"out"===t&&i.L===i.A.R.length-1){var e=new ZC.DW(i.A);e.Z=e.C6=i.H.usc()?i.H.mc("top"):i.C.AJ["3d"]||i.H.K5?ZC.AK(i.C.K+"-plots-vb-c"):ZC.AK(i.C.K+"-plot-"+i.A.L+"-vb-c"),e.append(i.A.C2.o),e.B9=i.A0,e.DQ="line",e.D=[];var a=(i.B3+i.BI)/2%360,A=ZC.AO.BK(i.iX,i.iY,i.CN+i.E.bandwidth+C.DR,a),l=ZC.AO.BK(i.iX,i.iY,i.A.TV+i.A.R.length*(i.E.bandwidth+i.E.bandspace)+15+C.DR,a);A[0]+=i.BJ,l[0]+=i.BJ,A[1]+=i.BH,l[1]+=i.BH,e.D.push(A),a>=0&&a<90||a>=270&&a<360?e.D.push([l[0],l[1],l[0]+10,l[1]]):e.D.push([l[0],l[1],l[0]-10,l[1]]),e.parse(),e.JE=function(n){return i.JE(n)},e.DE()&&e.parse(),e.AM&&e.paint()}}},paint:function(){function n(){var n=r.FB(),i=C.C.K+"-node-area "+C.C.K+"-plotset-plot-"+C.A.L+"-node-area zc-node-area",t=ZC.Q.GC("poly",C.A.E8,C.A.IR)+'class="'+i+'" id="'+C.K+'" coords="'+n+'" />';C.A.A.HN.push(t),C.A.U&&C.A.U.AM&&C.GU()}var i,C=this;C.b();var t=C.C.BN(C.A.BT("k")[0]);C.setup(),C.AI=ZC.CY(t.I,t.F)/2,C.AI=t.JM*C.AI,C.CN=C.A.TV,C.CN<1&&(C.CN=C.A.TV*C.AI);var e=C.A.SH;e<1&&(e=C.A.SH*C.AI);var a=2,A=C.AI-C.CN;if(null!==ZC._n_(C.A.aBandWidths)&&null!==ZC._n_(C.A.aBandWidths[C.L])){(a=ZC._f_(C.A.aBandWidths[C.L]))>1&&(a/=100),a=ZC._i_(A*a),a=ZC.BQ(a,2);for(var l=0,o=0;o<C.L;o++)l+=ZC._f_(C.A.aBandWidths[o]);l>1&&(l/=100),l=ZC._i_(A*l),C.CN+=l,C.AI=C.CN+a}else a=(A-(C.A.R.length-1)*e)/C.A.R.length,a=ZC.BQ(a,2),C.CN+=C.L*(a+e),C.AI=C.CN+a;var s=C.N=C.A.I8(C,C);C.GZ(s);var r=new ZC.DW(C.A);r.K=C.K,r.Z=C.A.CO("bl",1),r.C6=C.A.CO("bl",0),r.copy(s),r.iX=C.iX,r.iY=C.iY,r.DQ="pie",r.B3=C.B3,r.BI=C.BI,r.CN=C.CN,r.AI=C.AI,r.parse();var B=r.CN;if(C.E.bandwidth=a,C.E.bandspace=e,C.A.GA&&!C.C.HF){var c=r,Z={};c.B3=C.B3,c.BI=C.BI,Z.angleStart=C.B3,Z.angleEnd=C.BI;var u=C.A.L6;if(c.C5=0,Z.alpha=s.C5,2===u)c.BI=C.B3,Z.angleEnd=C.BI;else if(3===u)c.CN=B+C.E.bandwidth,Z.slice=B;else if(4===u){var h=ZC.AO.BK(C.iX,C.iY,C.AI,(C.B3+C.BI)/2);c.iX=h[0],c.iY=h[1],Z.x=C.iX,Z.y=C.iY}else 5===u&&(c.B3=c.BI=(C.B3+C.BI)/2,Z.angleStart=C.B3,Z.angleEnd=C.BI);for(i in C.A.FT)c[ZC.EA.GK[ZC.EC(i)]]=C.A.FT[i],Z[ZC.EC(i)]=s[ZC.EA.GK[ZC.EC(i)]];if(C.C.EM||(C.C.EM={}),null!==ZC._n_(C.C.EM[C.A.L+"-"+C.L]))for(i in C.C.EM[C.A.L+"-"+C.L])c[ZC.EA.GK[ZC.EC(i)]]=C.C.EM[C.A.L+"-"+C.L][i];C.C.EM[C.A.L+"-"+C.L]={},ZC._cp_(Z,C.C.EM[C.A.L+"-"+C.L]);var p=new ZC.EA(c,Z,C.A.JD,C.A.L2,ZC.EA.RC[C.A.L5],function(){n()});p.AW=C,C.LL(p)}else r.paint(),n()},A3H:function(n){var i=this;ZC.move||i.M2({layer:n,type:"shape",initcb:function(){this.copy(i),this.iX=i.iX,this.iY=i.iY,this.DQ="pie",this.A0=i.A.BP[3],this.AE=i.A.BP[2],this.B3=i.B3,this.BI=i.BI,this.CN=i.CN,this.AI=i.AI},parsecb:function(){this.o.slice=null}})}});
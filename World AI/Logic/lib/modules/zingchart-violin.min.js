/*
All of the code within the ZingChart software is developed and copyrighted by ZingChart, Inc., and may not be copied,
replicated, or used in any other software or application without prior permission from ZingChart. All usage must coincide with the
ZingChart End User License Agreement which can be requested by email at support@zingchart.com.

Build 2.9.1
*/
zingchart.setModule("violin"),zingchart.plugins.violin={},zingchart.bind(null,"dataparse",function(e,t){var i,r,a,n,l,o,s=zingchart.getLoader(e.id),h=zingchart.getModules(s);if(-1!==ZC.AV(h,"violin"))for(i=0,r=t.graphset.length;i<r;i++){var c,p,u=t.graphset[i].type,v=t.graphset[i];if("scatter"===u)v.type="mixed",c="varea",p="scatter";else{if("hscatter"!==u)return t;v.type="hmixed",c="area",p="hscatter"}t.graphset[i]["plugin-type"]=u;var g={};v.options&&(g=v.options.violin||v.options),ZC._todash_(g);var _=v.series||[];for(n=_.length-1;n>=0;n--)_[n].cls&&"zc-violin"===_[n].cls?_.splice(n,1):_[n]["o-values"]&&(_[n].values=[].concat(_[n]["o-values"]));var d=ZC._f_(ZC._c_(g.jitter,1)),f=ZC._f_(ZC._c_(g["rounding-factor"],1)),m=ZC._f_(ZC._c_(g["mean-factor"],2)),C=ZC._b_(ZC._c_(g.trim,!1)),Z=[];for(n=0;n<_.length;n++){var b={},A=[],x=[],z=_[n].values||[],M=[],y=[],k={},V=-Number.MAX_VALUE,L=Number.MAX_VALUE;for(o=0;o<z.length;o++){var E=z[o];-1===ZC.AV(y,E[0])&&y.push(E[0]),f<=0&&(f=1);var N;if(f<1){var U=1/f;N=Math.round(U*E[1])/U}else N=f*Math.round(E[1]/f);k[E[0]+"/"+N]=ZC._i_(k[E[0]+"/"+N]||"0"),k[E[0]+"/"+N]++,b[E[0]+"/"+N]=b[E[0]+"/"+N]||[],b[E[0]+"/"+N].push(E[1])}_[n].violin&&ZC._todash_(_[n].violin);var X=.05*d;for(l=0;l<y.length;l++){var w=[],j=[];V=-Number.MAX_VALUE,L=Number.MAX_VALUE;for(var q in k){var B=q.split("/"),D=ZC._f_(B[0]),F=ZC._f_(B[1]);if(y[l]===D){var G=k[q];for(a=0;a<G;a++)A.push(b[q][a]),x.push(D),M.push([D-X*G/2+a*X+X/2,F]);w.push([D-X*G/2-1.5*X,F]),j.push([D+X*G/2+1.5*X,F]),V=Math.max(V,F),L=Math.min(L,F)}}if(!C){var H=.2*(V-L);w.push([y[l],L-H],[y[l],V+H]),j.push([y[l],L-H],[y[l],V+H])}w.sort(function(e,t){return e[1]-t[1]}),j.sort(function(e,t){return t[1]-e[1]});var I,J=[],K=[],O=0,P=Number.MAX_VALUE,Q=-1;for(a=0;a<w.length;a++)0===a||a===w.length-1?(a===w.length-1&&-1!==Q&&(I=j.length-Q-1,J.push([w[Q][0],w[Q][1]]),K.push([j[I][0],j[I][1]])),I=j.length-a-1,J.push([w[a][0],w[a][1]]),K.push([j[I][0],j[I][1]])):(w[a][0]<P&&(P=w[a][0],Q=a),O===m&&(I=j.length-Q-1,J.push([w[Q][0],w[Q][1]]),K.push([j[I][0],j[I][1]]),O=0,P=Number.MAX_VALUE,Q=-1),O++);C&&(J.unshift([y[l],L]),J.push([y[l],V]),K.unshift([y[l],L]),K.push([y[l],V]));var R={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:J,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(g.style,R),ZC._cp_(_[n].violin,R),Z.push(R);var S={type:c,"ref-value":y[l],cls:"zc-violin","line-width":1,alpha:.25,"line-color":"#666","background-color":"#999",aspect:"spline",monotone:!1,values:K,marker:{type:"none"},"max-trackers":0,"max-nodes":0,"legend-item":{visible:!1},"legend-marker":{visible:!1}};ZC._cp_(g.style,S),ZC._cp_(_[n].violin,S),Z.push(S)}_[n]["data-value"]=A,_[n]["data-key"]=x,_[n]["o-values"]=[].concat(_[n].values),_[n].type=p,_[n].values=M}v.series=[].concat(Z).concat(_)}return t}),zingchart.bind(null,"legend_item_click",function(e){var t=zingchart.getLoader(e.id),i=zingchart.getModules(t);if(-1!==ZC.AV(i,"violin")){var r=zingchart.exec(e.id,"getplotlength");zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*r/3)}),zingchart.exec(e.id,e.visible?"hideplot":"showplot",{plotindex:2*(e.plotindex-2*r/3)+1})}});